(function() {
  var $$, $_, Achieve, Assert, AsyncFunction, Attempt, Chain, Counter, EventEmitter, GeneratorFunction, Impostor, Loop, Message, Method, Module, Parallel, Policy, Propose, Retract, Rule, Sequence, TS, TS_FAILURE, TS_INIT, TS_RUNNING, TS_SUCCESS, TS_SUSPENDED, Task, TaskStatus, Term, __, clone, nextTick, toStatus, unit_;

  nextTick = require('process').nextTick;

  ({unit_, __, clone, GeneratorFunction, AsyncFunction} = require('./common'));

  $$ = unit_(module);

  ({EventEmitter} = require('events'));

  ({Policy} = require('./policy'));

  ({$_, Term, Message, Propose, Attempt, Assert, Retract, Achieve} = require('../main'));

  TaskStatus = class TaskStatus {
    constructor(name1) {
      this.name = name1;
    }

    toString() {
      return this.name;
    }

  };

  //toJSON: -> { type: @constructor.name, name: @name }
  TS = function(name) {
    return new TaskStatus(name);
  };

  TS_INIT = TS('Init');

  exports.TS_RUNNING = TS_RUNNING = TS('Running');

  exports.end = exports.TS_SUCCESS = TS_SUCCESS = TS('Success');

  TS_FAILURE = TS('Failure');

  TS_SUSPENDED = TS('Suspended');

  toStatus = function(status) {
    if (!(status instanceof TaskStatus)) {
      status = TS_SUCCESS;
    }
    return status;
  };

  Task = (function() {
    class Task extends EventEmitter {
      constructor(init) {
        super();
        this.init = init || this.init;
        this.rnr = null;
        this._msg = null;
        this._parent = null;
        this.tasks = [];
        this.result = null;
        this.status = TS_INIT;
        this.policy = null;
      }

      toJSON() {
        return {
          type: this.constructor.name,
          msg: this.msg
        };
      }

      def(trigger, action) {
        return this.addRule(new Rule(trigger, action));
      }

      defg(trigger, action) {
        return this.defn(this.rnr, trigger, action);
      }

      defn(n, trigger, action) {
        return n.addRule(new Rule(trigger, action));
      }

      addRule(r) {
        if (this.policy === null) {
          this.policy = new Policy(this);
        }
        return this.policy.add(r);
      }

      findRule(m) {
        return this.findRules(m).pop();
      }

      findRules(m) {
        if (this.policy) {
          return this.policy.find(m);
        }
        return [];
      }

      matchRule(m) {
        return this.matchRules(m).pop();
      }

      matchRules(m) {
        if (this.policy) {
          return this.policy.match(m);
        }
        return [];
      }

      strategy(child) {
        switch (child.status) {
          case TS_FAILURE:
            this.remove(child);
            return this.fail();
          case TS_SUCCESS:
            this.remove(child);
            if (tasks.length === 0) {
              return this.succeed();
            }
        }
      }

      add(child) {
        child.parent = this;
        this.tasks.push(child);
        return this;
      }

      remove(child) {
        var index;
        index = this.tasks.indexOf(child);
        if (index > -1) {
          this.tasks.splice(index, 1);
        }
        return this;
      }

      /*
      EXECUTION
      */
      init() {
        if (this.main) {
          this.action = this.main;
          this.status = this.action();
        }
        return this.status;
      }

      action() {
        var iter;
        if (this.init instanceof GeneratorFunction) {
          iter = this.init();
          this.action = function() {
            var result;
            result = iter.next();
            this.status = toStatus(result.value);
            return this.status;
          };
          return this.status = toStatus(this.action());
        } else {
          //else if @init instanceof AsyncFunction then @status = (await @init()) || TS_SUCCESS
          this.status = toStatus(this.init());
          if (this.main) {
            this.action = this.main;
            this.status = toStatus(this.action());
          }
          return this.status;
        }
      }

      schedule(t) {
        if (t.scheduled) {
          return t;
        }
        t.scheduled = true;
        //setImmediate ->
        nextTick(function() {
          var err;
          t.scheduled = false;
          try {
            return t.status = toStatus(t.action());
          } catch (error) {
            err = error;
            return t.reject(err);
          }
        });
        return t;
      }

      //Promise Support
      then(resolve, reject) {
        this.resolve = resolve;
        this.reject = reject;
        console.log('Then');
        this.status = toStatus(this.action());
        return this;
      }

      resolve() {
        return console.log('Promise Resolved');
      }

      reject(err) {
        console.log('Promise Rejected');
        throw err;
      }

      //TODO:  What if init is a generator???
      import(requirer, path) {
        return requirer(path).init.call(this);
      }

      /*
      DSL
      */
      chain(b) {
        var a;
        a = this.tasks[this.tasks.length - 1];
        if (a) {
          a.dst = b;
          b.src = a;
        }
        this.add(b);
        return this;
      }

      task(action) {
        var child;
        child = new Task(action);
        this.add(child);
        return this;
      }

      loop(action) {
        var child;
        child = new Loop(action);
        this.add(child);
        return this;
      }

      counter(from, to, action) {
        var child;
        child = new Counter(from, to, action);
        this.add(child);
        return this;
      }

      sequence(action) {
        var child;
        child = new Sequence(action);
        this.add(child);
        return this;
      }

      suspend() {
        return this.status = TS_SUSPENDED;
      }

      resume() {
        return this.status = TS_RUNNING;
      }

      succeed() {
        return this.status = TS_SUCCESS;
      }

      fail() {
        return this.status = TS_FAILURE;
      }

      broadcast(msg) {}

      post(msg) {
        msg.from = this;
        return this.rnr.post(msg);
      }

      spawn(o, wait = false) {
        var task;
        if (typeof o === 'function') {
          task = new Task(o);
        } else if (o instanceof Task) {
          task = o;
        } else {
          throw new Error('Expecting Function or Task');
        }
        if (wait) {
          task.caller = this;
        }
        return this.rnr.schedule(task);
      }

      call(s, p, o, x) {
        var c, m;
        c = new Achieve(s, p, o, x);
        m = new Attempt(c, this);
        m.caller = this;
        this.post(m);
        return this.suspend();
      }

      callSync(s, p, o, x) {
        var c, m;
        c = new Achieve(s, p, o, x);
        m = new Attempt(c, this);
        m.caller = this;
        this.post(m);
        return this.suspend();
      }

      perform(s, p, o, x) {
        var c, m;
        c = new Achieve(s, p, o, x);
        m = new Attempt(c, this);
        return this.post(m);
      }

      propose(c) {
        return this.post(new Propose(c, this));
      }

      attempt(c) {
        return this.post(new Attempt(c, this));
      }

      assert(c) {
        return this.post(new Assert(c, this));
      }

      retract(c) {
        return this.post(new Retract(c, this));
      }

    };

    Task.property('parent', {
      get: function() {
        return this._parent;
      },
      set: function(parent) {
        this._parent = parent;
        if (this.policy) {
          return this.policy.parent = parent.policy;
        } else {
          return this.policy = parent.policy;
        }
      }
    });

    Task.property('msg', {
      get: function() {
        return this._msg;
      },
      set: function(msg) {
        this._msg = msg;
        return this.policy = msg.from.policy;
      }
    });

    return Task;

  }).call(this);

  exports.Task = Task;

  exports.task_ = function(action) {
    return new Task(action);
  };

  
  Impostor = class Impostor extends Task {
    constructor(identity, action) {
      super(action);
      this.identity = identity;
    }

    def(trigger, action) {
      return this.identity.def(trigger, action);
    }

  };

  exports.Impostor = Impostor;

  
  Chain = class Chain extends Task {
    constructor(action) {
      super(action);
    }

    main() {
      var child;
      child = this.tasks[0];
      this.rnr.schedule(child);
      return this.suspend();
    }

    strategy(child) {
      this.remove(child);
      if (child.status === TS_FAILURE) {
        return this.fail();
      }
      if (child.dst) {
        return this.rnr.schedule(child.dst);
      }
    }

  };

  //@resume()
  exports.Chain = Chain;

  exports.chain_ = function(action) {
    return new Chain(action);
  };

  Parallel = class Parallel extends Task {
    constructor(action) {
      super(action);
    }

    main() {
      var child, i, len, ref;
      ref = this.tasks;
      for (i = 0, len = ref.length; i < len; i++) {
        child = ref[i];
        this.rnr.schedule(child);
      }
      return this.suspend();
    }

    strategy(child) {
      this.remove(child);
      if (child.status === TS_FAILURE) {
        return this.fail();
      }
      //else
      return this.resume();
    }

  };

  exports.Parallel = Parallel;

  
  //Loop

  Loop = class Loop extends Task {
    constructor(action) {
      super(action);
    }

    main() {
      var child;
      child = this.tasks.shift();
      this.tasks.push(child);
      //else
      this.rnr.schedule(child);
      return this.suspend();
    }

    strategy(child) {
      if (child.status === TS_FAILURE) {
        return this.fail();
      }
      //else
      return this.resume();
    }

  };

  exports.Loop = Loop;

  
  //Counter

  Counter = class Counter extends Task {
    constructor(from, to, action) {
      super(action);
      this.value = from;
      this.to = to;
      this.index = 0;
    }

    main() {
      var child;
      child = this.tasks[this.index];
      if (child === void 0) {
        child = this.tasks[this.index = 0];
      }
      //else
      this.rnr.schedule(child);
      return this.suspend();
    }

    strategy(child) {
      this.index++;
      if (child.status === TS_FAILURE) {
        return this.fail();
      }
      //else
      if (this.value++ === this.to) {
        return this.succeed();
      }
      //else
      return this.resume();
    }

  };

  exports.Counter = Counter;

  
  //Sequence

  Sequence = class Sequence extends Task {
    constructor(action) {
      super(action);
    }

    main() {
      var child;
      child = this.tasks.shift();
      if (child === void 0) {
        return this.succeed();
      }
      //else
      this.rnr.schedule(child);
      return this.suspend();
    }

    strategy(child) {
      if (child.status === TS_FAILURE) {
        return this.fail();
      }
      //else
      if (this.tasks.length > 0) {
        return this.resume();
      }
      //else
      return this.succeed();
    }

  };

  exports.Sequence = Sequence;

  
  Method = class Method extends Sequence {
    constructor(action) {
      super(action);
    }

  };

  exports.Method = Method;

  exports.method_ = function(action) {
    return new Method(action);
  };

  
  //Module

  Module = class Module extends Method {
    constructor(action) {
      super(action);
    }

  };

  exports.Module = Module;

  exports.module_ = function(action) {
    return new Module(action);
  };

  
  //Rule

  Rule = class Rule {
    constructor(t, a) {
      this.trigger = t;
      this.action = a;
    }

    match(msg) {
      var m, result, t;
      result = this.trigger.match(msg);
      if (!result) {
        return false;
      }
      t = new Method(this.action);
      m = clone(msg, result);
      m.rule = this;
      m.to = t;
      t.msg = m;
      t.caller = m.caller;
      return m;
    }

  };

  /*
  fire: (rnr, msg) ->
  t = new Method(@action)
  t.msg = msg
  t.caller = msg.caller
  rnr.schedule(t)
  */
  exports.Rule = Rule;

  exports.def = function(t, a) {
    return new Rule(t, a);
  };

  exports.sequence_ = function(action) {
    return new Sequence(action);
  };

  exports.counter_ = function(from, to, action) {
    return new Counter(from, to, action);
  };

  exports.parallel_ = function(action) {
    return new Parallel(action);
  };

}).call(this);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay90YXNrLmpzIiwic291cmNlcyI6WyJ0YXNrL3Rhc2suY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsYUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLFlBQUEsRUFBQSxpQkFBQSxFQUFBLFFBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLFVBQUEsRUFBQSxPQUFBLEVBQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxZQUFBLEVBQUEsSUFBQSxFQUFBLFVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBOztFQUFBLFFBQUEsR0FBVyxPQUFBLENBQVEsU0FBUixDQUFrQixDQUFDOztFQUM5QixDQUFBLENBQUMsS0FBRCxFQUFRLEVBQVIsRUFBWSxLQUFaLEVBQW1CLGlCQUFuQixFQUFzQyxhQUF0QyxDQUFBLEdBQXVELE9BQUEsQ0FBUSxVQUFSLENBQXZEOztFQUNBLEVBQUEsR0FBSyxLQUFBLENBQU0sTUFBTjs7RUFFTCxDQUFBLENBQUUsWUFBRixDQUFBLEdBQW1CLE9BQUEsQ0FBUSxRQUFSLENBQW5COztFQUNBLENBQUEsQ0FBRSxNQUFGLENBQUEsR0FBYSxPQUFBLENBQVEsVUFBUixDQUFiOztFQUNBLENBQUEsQ0FBRSxFQUFGLEVBQU0sSUFBTixFQUFZLE9BQVosRUFBcUIsT0FBckIsRUFBOEIsT0FBOUIsRUFBdUMsTUFBdkMsRUFBK0MsT0FBL0MsRUFBd0QsT0FBeEQsQ0FBQSxHQUFvRSxPQUFBLENBQVEsU0FBUixDQUFwRTs7RUFFTSxhQUFOLE1BQUEsV0FBQTtJQUNFLFdBQWEsTUFBQSxDQUFBO01BQUMs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V0FBVSxJQUFJLElBQUosQ0FBUyxDQUFULEVBQVksQ0FBWjtFQUFWOztFQUVkLE9BQU8sQ0FBQyxTQUFSLEdBQW9CLFFBQUEsQ0FBQyxNQUFELENBQUE7QUFDbEIsV0FBTyxJQUFJLFFBQUosQ0FBYSxNQUFiO0VBRFc7O0VBR3BCLE9BQU8sQ0FBQyxRQUFSLEdBQW1CLFFBQUEsQ0FBQyxJQUFELEVBQU8sRUFBUCxFQUFXLE1BQVgsQ0FBQTtBQUNqQixXQUFPLElBQUksT0FBSixDQUFZLElBQVosRUFBa0IsRUFBbEIsRUFBc0IsTUFBdEI7RUFEVTs7RUFHbkIsT0FBTyxDQUFDLFNBQVIsR0FBb0IsUUFBQSxDQUFDLE1BQUQsQ0FBQTtBQUNsQixXQUFPLElBQUksUUFBSixDQUFhLE1BQWI7RUFEVztBQXphcEIiLCJzb3VyY2VzQ29udGVudCI6WyJuZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MnKS5uZXh0VGlja1xue3VuaXRfLCBfXywgY2xvbmUsIEdlbmVyYXRvckZ1bmN0aW9uLCBBc3luY0Z1bmN0aW9ufSA9IHJlcXVpcmUgJy4vY29tbW9uJ1xuJCQgPSB1bml0XyBtb2R1bGVcblxueyBFdmVudEVtaXR0ZXIgfSA9IHJlcXVpcmUoJ2V2ZW50cycpXG57IFBvbGljeSB9ID0gcmVxdWlyZSgnLi9wb2xpY3knKVxueyAkXywgVGVybSwgTWVzc2FnZSwgUHJvcG9zZSwgQXR0ZW1wdCwgQXNzZXJ0LCBSZXRyYWN0LCBBY2hpZXZlIH0gPSByZXF1aXJlICcuLi9tYWluJ1xuXG5jbGFzcyBUYXNrU3RhdHVzXG4gIGNvbnN0cnVjdG9yOiAoQG5hbWUpIC0+XG4gIHRvU3RyaW5nOiAtPiBAbmFtZVxuICAjdG9KU09OOiAtPiB7IHR5cGU6IEBjb25zdHJ1Y3Rvci5uYW1lLCBuYW1lOiBAbmFtZSB9XG5UUyA9IChuYW1lKSAtPiBuZXcgVGFza1N0YXR1cyBuYW1lXG5cblRTX0lOSVQgPSBUUyAnSW5pdCdcbmV4cG9ydHMuVFNfUlVOTklORyA9IFRTX1JVTk5JTkcgPSBUUyAnUnVubmluZydcbmV4cG9ydHMuZW5kID0gZXhwb3J0cy5UU19TVUNDRVNTID0gVFNfU1VDQ0VTUyA9IFRTICdTdWNjZXNzJ1xuVFNfRkFJTFVSRSA9IFRTICdGYWlsdXJlJ1xuVFNfU1VTUEVOREVEID0gVFMgJ1N1c3BlbmRlZCdcblxudG9TdGF0dXMgPSAoc3RhdHVzKSAtPlxuICBpZiAhKHN0YXR1cyBpbnN0YW5jZW9mIFRhc2tTdGF0dXMpXG4gICAgc3RhdHVzID0gVFNfU1VDQ0VTU1xuICByZXR1cm4gc3RhdHVzXG5cbmNsYXNzIFRhc2sgZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbiAgY29uc3RydWN0b3I6IChpbml0KSAtPlxuICAgIHN1cGVyKClcbiAgICBAaW5pdCA9IGluaXQgfHwgQGluaXRcbiAgICBAcm5yID0gbnVsbFxuICAgIEBfbXNnID0gbnVsbFxuICAgIEBfcGFyZW50ID0gbnVsbFxuICAgIEB0YXNrcyA9IFtdXG4gICAgQHJlc3VsdCA9IG51bGxcbiAgICBAc3RhdHVzID0gVFNfSU5JVFxuICAgIEBwb2xpY3kgPSBudWxsXG5cbiAgQHByb3BlcnR5ICdwYXJlbnQnLFxuICAgIGdldDogLT4gQF9wYXJlbnRcbiAgICBzZXQ6IChwYXJlbnQpIC0+XG4gICAgICBAX3BhcmVudCA9IHBhcmVudFxuICAgICAgaWYgQHBvbGljeVxuICAgICAgICBAcG9saWN5LnBhcmVudCA9IHBhcmVudC5wb2xpY3lcbiAgICAgIGVsc2VcbiAgICAgICAgQHBvbGljeSA9IHBhcmVudC5wb2xpY3lcblxuICBAcHJvcGVydHkgJ21zZycsXG4gICAgZ2V0OiAtPiBAX21zZ1xuICAgIHNldDogKG1zZykgLT5cbiAgICAgIEBfbXNnID0gbXNnXG4gICAgICBAcG9saWN5ID0gbXNnLmZyb20ucG9saWN5XG5cbiAgdG9KU09OOiAtPlxuICAgIHtcbiAgICAgIHR5cGU6IEBjb25zdHJ1Y3Rvci5uYW1lXG4gICAgICBtc2c6IEBtc2dcbiAgICB9XG5cbiAgZGVmOiAodHJpZ2dlciwgYWN0aW9uKSAtPlxuICAgIEBhZGRSdWxlIG5ldyBSdWxlKHRyaWdnZXIsIGFjdGlvbilcblxuICBkZWZnOiAodHJpZ2dlciwgYWN0aW9uKSAtPlxuICAgIEBkZWZuIEBybnIsIHRyaWdnZXIsIGFjdGlvblxuXG4gIGRlZm46IChuLCB0cmlnZ2VyLCBhY3Rpb24pIC0+XG4gICAgbi5hZGRSdWxlIG5ldyBSdWxlKHRyaWdnZXIsIGFjdGlvbilcblxuICBhZGRSdWxlOiAocikgLT5cbiAgICBpZiBAcG9saWN5ID09IG51bGxcbiAgICAgIEBwb2xpY3kgPSBuZXcgUG9saWN5KHRoaXMpXG4gICAgQHBvbGljeS5hZGQgclxuXG4gIGZpbmRSdWxlOiAobSkgLT5cbiAgICByZXR1cm4gQGZpbmRSdWxlcyhtKS5wb3AoKVxuXG4gIGZpbmRSdWxlczogKG0pIC0+XG4gICAgaWYgQHBvbGljeSB0aGVuIHJldHVybiBAcG9saWN5LmZpbmQobSlcbiAgICByZXR1cm4gW11cblxuICBtYXRjaFJ1bGU6IChtKSAtPlxuICAgIHJldHVybiBAbWF0Y2hSdWxlcyhtKS5wb3AoKVxuXG4gIG1hdGNoUnVsZXM6IChtKSAtPlxuICAgIGlmIEBwb2xpY3kgdGhlbiByZXR1cm4gQHBvbGljeS5tYXRjaChtKVxuICAgIHJldHVybiBbXVxuXG4gIHN0cmF0ZWd5OiAoY2hpbGQpIC0+XG4gICAgc3dpdGNoIGNoaWxkLnN0YXR1c1xuICAgICAgd2hlbiBUU19GQUlMVVJFXG4gICAgICAgIEByZW1vdmUoY2hpbGQpXG4gICAgICAgIEBmYWlsKClcbiAgICAgIHdoZW4gVFNfU1VDQ0VTU1xuICAgICAgICBAcmVtb3ZlKGNoaWxkKVxuICAgICAgICBpZiB0YXNrcy5sZW5ndGggPT0gMCB0aGVuIEBzdWNjZWVkKClcblxuICBhZGQ6IChjaGlsZCkgLT5cbiAgICBjaGlsZC5wYXJlbnQgPSB0aGlzXG4gICAgQHRhc2tzLnB1c2goY2hpbGQpXG4gICAgcmV0dXJuIHRoaXNcblxuICByZW1vdmU6IChjaGlsZCkgLT5cbiAgICBpbmRleCA9IEB0YXNrcy5pbmRleE9mKGNoaWxkKVxuICAgIGlmIChpbmRleCA+IC0xKVxuICAgICAgQHRhc2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuIHRoaXNcblxuICAjIyNcbiAgRVhFQ1VUSU9OXG4gICMjI1xuXG4gIGluaXQ6IC0+XG4gICAgaWYoQG1haW4pXG4gICAgICBAYWN0aW9uID0gQG1haW5cbiAgICAgIEBzdGF0dXMgPSBAYWN0aW9uKClcbiAgICByZXR1cm4gQHN0YXR1c1xuXG4gIGFjdGlvbjogLT5cbiAgICBpZiBAaW5pdCBpbnN0YW5jZW9mIEdlbmVyYXRvckZ1bmN0aW9uXG4gICAgICBpdGVyID0gQGluaXQoKVxuICAgICAgQGFjdGlvbiA9IC0+XG4gICAgICAgIHJlc3VsdCA9IGl0ZXIubmV4dCgpXG4gICAgICAgIEBzdGF0dXMgPSB0b1N0YXR1cyhyZXN1bHQudmFsdWUpXG4gICAgICAgIHJldHVybiBAc3RhdHVzXG4gICAgICBAc3RhdHVzID0gdG9TdGF0dXMoQGFjdGlvbigpKVxuICAgICNlbHNlIGlmIEBpbml0IGluc3RhbmNlb2YgQXN5bmNGdW5jdGlvbiB0aGVuIEBzdGF0dXMgPSAoYXdhaXQgQGluaXQoKSkgfHwgVFNfU1VDQ0VTU1xuICAgIGVsc2VcbiAgICAgIEBzdGF0dXMgPSB0b1N0YXR1cyhAaW5pdCgpKVxuICAgICAgaWYoQG1haW4pXG4gICAgICAgIEBhY3Rpb24gPSBAbWFpblxuICAgICAgICBAc3RhdHVzID0gdG9TdGF0dXMoQGFjdGlvbigpKVxuICAgICAgcmV0dXJuIEBzdGF0dXNcblxuICBzY2hlZHVsZTogKHQpIC0+XG4gICAgaWYgdC5zY2hlZHVsZWQgdGhlbiByZXR1cm4gdFxuICAgIHQuc2NoZWR1bGVkID0gdHJ1ZVxuICAgICNzZXRJbW1lZGlhdGUgLT5cbiAgICBuZXh0VGljayAtPlxuICAgICAgdC5zY2hlZHVsZWQgPSBmYWxzZVxuICAgICAgdHJ5XG4gICAgICAgIHQuc3RhdHVzID0gdG9TdGF0dXModC5hY3Rpb24oKSlcbiAgICAgIGNhdGNoIGVyclxuICAgICAgICB0LnJlamVjdCBlcnJcbiAgICByZXR1cm4gdFxuXG4gICNQcm9taXNlIFN1cHBvcnRcbiAgdGhlbjogKEByZXNvbHZlLCBAcmVqZWN0KSAtPlxuICAgIGNvbnNvbGUubG9nICdUaGVuJ1xuICAgIEBzdGF0dXMgPSB0b1N0YXR1cyhAYWN0aW9uKCkpXG4gICAgcmV0dXJuIHRoaXNcbiAgcmVzb2x2ZTogLT5cbiAgICBjb25zb2xlLmxvZyAnUHJvbWlzZSBSZXNvbHZlZCdcbiAgcmVqZWN0OiAoZXJyKSAtPlxuICAgIGNvbnNvbGUubG9nICdQcm9taXNlIFJlamVjdGVkJ1xuICAgIHRocm93IGVyclxuXG4gICNUT0RPOiAgV2hhdCBpZiBpbml0IGlzIGEgZ2VuZXJhdG9yPz8/XG4gIGltcG9ydDogKHJlcXVpcmVyLCBwYXRoKSAtPlxuICAgIHJlcXVpcmVyKHBhdGgpLmluaXQuY2FsbCh0aGlzKVxuICAjIyNcbiAgRFNMXG4gICMjI1xuICBjaGFpbjogKGIpIC0+XG4gICAgYSA9IEB0YXNrc1tAdGFza3MubGVuZ3RoIC0gMV1cbiAgICBpZiBhXG4gICAgICBhLmRzdCA9IGJcbiAgICAgIGIuc3JjID0gYVxuICAgIEBhZGQgYlxuICAgIHJldHVybiB0aGlzXG5cbiAgdGFzazogKGFjdGlvbikgLT5cbiAgICBjaGlsZCA9IG5ldyBUYXNrKGFjdGlvbilcbiAgICBAYWRkKGNoaWxkKVxuICAgIHJldHVybiB0aGlzXG5cbiAgbG9vcDogKGFjdGlvbikgLT5cbiAgICBjaGlsZCA9IG5ldyBMb29wKGFjdGlvbilcbiAgICBAYWRkKGNoaWxkKVxuICAgIHJldHVybiB0aGlzXG5cbiAgY291bnRlcjogKGZyb20sIHRvLCBhY3Rpb24pIC0+XG4gICAgY2hpbGQgPSBuZXcgQ291bnRlcihmcm9tLCB0bywgYWN0aW9uKVxuICAgIEBhZGQoY2hpbGQpXG4gICAgcmV0dXJuIHRoaXNcblxuICBzZXF1ZW5jZTogKGFjdGlvbikgLT5cbiAgICBjaGlsZCA9IG5ldyBTZXF1ZW5jZShhY3Rpb24pXG4gICAgQGFkZChjaGlsZClcbiAgICByZXR1cm4gdGhpc1xuXG4gIHN1c3BlbmQ6IC0+XG4gICAgQHN0YXR1cyA9IFRTX1NVU1BFTkRFRFxuXG4gIHJlc3VtZTogLT5cbiAgICBAc3RhdHVzID0gVFNfUlVOTklOR1xuXG4gIHN1Y2NlZWQ6IC0+XG4gICAgQHN0YXR1cyA9IFRTX1NVQ0NFU1NcblxuICBmYWlsOiAtPlxuICAgIEBzdGF0dXMgPSBUU19GQUlMVVJFXG5cbiAgYnJvYWRjYXN0OiAobXNnKSAtPlxuXG4gIHBvc3Q6IChtc2cpIC0+XG4gICAgbXNnLmZyb20gPSB0aGlzXG4gICAgQHJuci5wb3N0KG1zZylcblxuICBzcGF3bjogKG8sIHdhaXQgPSBmYWxzZSkgLT5cbiAgICBpZiB0eXBlb2YgbyA9PSAnZnVuY3Rpb24nXG4gICAgICB0YXNrID0gbmV3IFRhc2sobylcbiAgICBlbHNlIGlmIG8gaW5zdGFuY2VvZiBUYXNrXG4gICAgICB0YXNrID0gb1xuICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yICdFeHBlY3RpbmcgRnVuY3Rpb24gb3IgVGFzaydcbiAgICBpZiB3YWl0XG4gICAgICB0YXNrLmNhbGxlciA9IHRoaXNcbiAgICBAcm5yLnNjaGVkdWxlKHRhc2spXG5cbiAgY2FsbDogKHMsIHAsIG8sIHgpIC0+XG4gICAgYyA9IG5ldyBBY2hpZXZlKHMsIHAsIG8sIHgpXG4gICAgbSA9IG5ldyBBdHRlbXB0KGMsIHRoaXMpXG4gICAgbS5jYWxsZXIgPSB0aGlzXG4gICAgQHBvc3QobSlcbiAgICByZXR1cm4gQHN1c3BlbmQoKVxuXG4gIGNhbGxTeW5jOiAocywgcCwgbywgeCkgLT5cbiAgICBjID0gbmV3IEFjaGlldmUocywgcCwgbywgeClcbiAgICBtID0gbmV3IEF0dGVtcHQoYywgdGhpcylcbiAgICBtLmNhbGxlciA9IHRoaXNcbiAgICBAcG9zdChtKVxuICAgIHJldHVybiBAc3VzcGVuZCgpXG5cbiAgcGVyZm9ybTogKHMsIHAsIG8sIHgpIC0+XG4gICAgYyA9IG5ldyBBY2hpZXZlKHMsIHAsIG8sIHgpXG4gICAgbSA9IG5ldyBBdHRlbXB0KGMsIHRoaXMpXG4gICAgQHBvc3QobSlcblxuICBwcm9wb3NlOiAoYykgLT5cbiAgICBAcG9zdCBuZXcgUHJvcG9zZShjLCB0aGlzKVxuXG4gIGF0dGVtcHQ6IChjKSAtPlxuICAgIEBwb3N0IG5ldyBBdHRlbXB0KGMsIHRoaXMpXG5cbiAgYXNzZXJ0OiAoYykgLT5cbiAgICBAcG9zdCBuZXcgQXNzZXJ0KGMsIHRoaXMpXG5cbiAgcmV0cmFjdDogKGMpIC0+XG4gICAgQHBvc3QgbmV3IFJldHJhY3QoYywgdGhpcylcblxuZXhwb3J0cy5UYXNrID0gVGFza1xuZXhwb3J0cy50YXNrXyA9IChhY3Rpb24pIC0+XG4gIHJldHVybiBuZXcgVGFzayhhY3Rpb24pXG4jXG5jbGFzcyBJbXBvc3RvciBleHRlbmRzIFRhc2tcbiAgY29uc3RydWN0b3I6IChAaWRlbnRpdHksIGFjdGlvbikgLT5cbiAgICBzdXBlcihhY3Rpb24pXG4gIGRlZjogKHRyaWdnZXIsIGFjdGlvbikgLT4gQGlkZW50aXR5LmRlZiB0cmlnZ2VyLCBhY3Rpb25cbmV4cG9ydHMuSW1wb3N0b3IgPSBJbXBvc3RvclxuI1xuY2xhc3MgQ2hhaW4gZXh0ZW5kcyBUYXNrXG4gIGNvbnN0cnVjdG9yOiAoYWN0aW9uKSAtPlxuICAgIHN1cGVyKGFjdGlvbilcblxuICBtYWluOiAtPlxuICAgIGNoaWxkID0gQHRhc2tzWzBdXG4gICAgQHJuci5zY2hlZHVsZShjaGlsZClcbiAgICBAc3VzcGVuZCgpXG5cbiAgc3RyYXRlZ3k6IChjaGlsZCkgLT5cbiAgICBAcmVtb3ZlIGNoaWxkXG4gICAgaWYoY2hpbGQuc3RhdHVzID09IFRTX0ZBSUxVUkUpXG4gICAgICByZXR1cm4gQGZhaWwoKVxuICAgIGlmIGNoaWxkLmRzdFxuICAgICAgQHJuci5zY2hlZHVsZShjaGlsZC5kc3QpXG5cbiAgICAjQHJlc3VtZSgpXG5cbmV4cG9ydHMuQ2hhaW4gPSBDaGFpblxuZXhwb3J0cy5jaGFpbl8gPSAoYWN0aW9uKSAtPiBuZXcgQ2hhaW4gYWN0aW9uXG5cbmNsYXNzIFBhcmFsbGVsIGV4dGVuZHMgVGFza1xuICBjb25zdHJ1Y3RvcjogKGFjdGlvbikgLT5cbiAgICBzdXBlcihhY3Rpb24pXG5cbiAgbWFpbjogLT5cbiAgICBmb3IgY2hpbGQgaW4gQHRhc2tzXG4gICAgICBAcm5yLnNjaGVkdWxlKGNoaWxkKVxuICAgIEBzdXNwZW5kKClcblxuICBzdHJhdGVneTogKGNoaWxkKSAtPlxuICAgIEByZW1vdmUgY2hpbGRcbiAgICBpZihjaGlsZC5zdGF0dXMgPT0gVFNfRkFJTFVSRSlcbiAgICAgIHJldHVybiBAZmFpbCgpXG4gICAgI2Vsc2VcbiAgICBAcmVzdW1lKClcblxuZXhwb3J0cy5QYXJhbGxlbCA9IFBhcmFsbGVsXG5cbiNcbiNMb29wXG4jXG5jbGFzcyBMb29wIGV4dGVuZHMgVGFza1xuICBjb25zdHJ1Y3RvcjogKGFjdGlvbikgLT5cbiAgICBzdXBlcihhY3Rpb24pXG5cbiAgbWFpbjogLT5cbiAgICBjaGlsZCA9IEB0YXNrcy5zaGlmdCgpXG4gICAgQHRhc2tzLnB1c2goY2hpbGQpXG4gICAgI2Vsc2VcbiAgICBAcm5yLnNjaGVkdWxlKGNoaWxkKVxuICAgIEBzdXNwZW5kKClcblxuICBzdHJhdGVneTogKGNoaWxkKSAtPlxuICAgIGlmKGNoaWxkLnN0YXR1cyA9PSBUU19GQUlMVVJFKVxuICAgICAgcmV0dXJuIEBmYWlsKClcbiAgICAjZWxzZVxuICAgIEByZXN1bWUoKVxuXG5leHBvcnRzLkxvb3AgPSBMb29wXG4jXG4jQ291bnRlclxuI1xuY2xhc3MgQ291bnRlciBleHRlbmRzIFRhc2tcbiAgY29uc3RydWN0b3I6IChmcm9tLCB0bywgYWN0aW9uKSAtPlxuICAgIHN1cGVyKGFjdGlvbilcbiAgICBAdmFsdWUgPSBmcm9tXG4gICAgQHRvID0gdG9cbiAgICBAaW5kZXggPSAwXG5cbiAgbWFpbjogLT5cbiAgICBjaGlsZCA9IEB0YXNrc1tAaW5kZXhdXG4gICAgaWYoY2hpbGQgPT0gdW5kZWZpbmVkKVxuICAgICAgY2hpbGQgPSBAdGFza3NbQGluZGV4ID0gMF1cbiAgICAjZWxzZVxuICAgIEBybnIuc2NoZWR1bGUoY2hpbGQpXG4gICAgQHN1c3BlbmQoKVxuXG4gIHN0cmF0ZWd5OiAoY2hpbGQpIC0+XG4gICAgQGluZGV4KytcbiAgICBpZihjaGlsZC5zdGF0dXMgPT0gVFNfRkFJTFVSRSlcbiAgICAgIHJldHVybiBAZmFpbCgpXG4gICAgI2Vsc2VcbiAgICBpZihAdmFsdWUrKyA9PSBAdG8pXG4gICAgICByZXR1cm4gQHN1Y2NlZWQoKVxuICAgICNlbHNlXG4gICAgQHJlc3VtZSgpXG5cbmV4cG9ydHMuQ291bnRlciA9IENvdW50ZXJcbiNcbiNTZXF1ZW5jZVxuI1xuY2xhc3MgU2VxdWVuY2UgZXh0ZW5kcyBUYXNrXG4gIGNvbnN0cnVjdG9yOiAoYWN0aW9uKSAtPlxuICAgIHN1cGVyKGFjdGlvbilcblxuICBtYWluOiAtPlxuICAgIGNoaWxkID0gQHRhc2tzLnNoaWZ0KClcbiAgICBpZihjaGlsZCA9PSB1bmRlZmluZWQpXG4gICAgICByZXR1cm4gQHN1Y2NlZWQoKVxuICAgICNlbHNlXG4gICAgQHJuci5zY2hlZHVsZShjaGlsZClcbiAgICBAc3VzcGVuZCgpXG5cbiAgc3RyYXRlZ3k6IChjaGlsZCkgLT5cbiAgICBpZihjaGlsZC5zdGF0dXMgPT0gVFNfRkFJTFVSRSlcbiAgICAgIHJldHVybiBAZmFpbCgpXG4gICAgI2Vsc2VcbiAgICBpZihAdGFza3MubGVuZ3RoID4gMClcbiAgICAgIHJldHVybiBAcmVzdW1lKClcbiAgICAjZWxzZVxuICAgIEBzdWNjZWVkKClcblxuZXhwb3J0cy5TZXF1ZW5jZSA9IFNlcXVlbmNlXG4jXG4jXG4jXG5jbGFzcyBNZXRob2QgZXh0ZW5kcyBTZXF1ZW5jZVxuICBjb25zdHJ1Y3RvcjogKGFjdGlvbikgLT5cbiAgICBzdXBlcihhY3Rpb24pXG5cbmV4cG9ydHMuTWV0aG9kID0gTWV0aG9kXG5leHBvcnRzLm1ldGhvZF8gPSAoYWN0aW9uKSAtPiBuZXcgTWV0aG9kIGFjdGlvblxuI1xuI01vZHVsZVxuI1xuY2xhc3MgTW9kdWxlIGV4dGVuZHMgTWV0aG9kXG4gIGNvbnN0cnVjdG9yOiAoYWN0aW9uKSAtPlxuICAgIHN1cGVyKGFjdGlvbilcblxuZXhwb3J0cy5Nb2R1bGUgPSBNb2R1bGVcbmV4cG9ydHMubW9kdWxlXyA9IChhY3Rpb24pIC0+XG4gIHJldHVybiBuZXcgTW9kdWxlKGFjdGlvbilcbiNcbiNSdWxlXG4jXG5jbGFzcyBSdWxlXG4gIGNvbnN0cnVjdG9yOiAodCwgYSkgLT5cbiAgICBAdHJpZ2dlciA9IHRcbiAgICBAYWN0aW9uID0gYVxuXG4gIG1hdGNoOiAobXNnKSAtPlxuICAgIHJlc3VsdCA9IEB0cmlnZ2VyLm1hdGNoKG1zZylcbiAgICBpZiAhcmVzdWx0IHRoZW4gcmV0dXJuIGZhbHNlXG4gICAgdCA9IG5ldyBNZXRob2QoQGFjdGlvbilcbiAgICBtID0gY2xvbmUobXNnLCByZXN1bHQpXG4gICAgbS5ydWxlID0gdGhpc1xuICAgIG0udG8gPSB0XG4gICAgdC5tc2cgPSBtXG4gICAgdC5jYWxsZXIgPSBtLmNhbGxlclxuICAgIHJldHVybiBtXG4gICMjI1xuICBmaXJlOiAocm5yLCBtc2cpIC0+XG4gICAgdCA9IG5ldyBNZXRob2QoQGFjdGlvbilcbiAgICB0Lm1zZyA9IG1zZ1xuICAgIHQuY2FsbGVyID0gbXNnLmNhbGxlclxuICAgIHJuci5zY2hlZHVsZSh0KVxuICAjIyNcbmV4cG9ydHMuUnVsZSA9IFJ1bGVcbmV4cG9ydHMuZGVmID0gKHQsIGEpIC0+IG5ldyBSdWxlIHQsIGFcblxuZXhwb3J0cy5zZXF1ZW5jZV8gPSAoYWN0aW9uKSAtPlxuICByZXR1cm4gbmV3IFNlcXVlbmNlKGFjdGlvbilcblxuZXhwb3J0cy5jb3VudGVyXyA9IChmcm9tLCB0bywgYWN0aW9uKSAtPlxuICByZXR1cm4gbmV3IENvdW50ZXIoZnJvbSwgdG8sIGFjdGlvbilcblxuZXhwb3J0cy5wYXJhbGxlbF8gPSAoYWN0aW9uKSAtPlxuICByZXR1cm4gbmV3IFBhcmFsbGVsKGFjdGlvbilcbiJdfQ==
